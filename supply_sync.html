<!doctype html> 
 <html lang="en"> 
 <head> 
 <meta charset="utf-8"> 
 <meta name="viewport" content="width=device-width, initial-scale=1"> 
 <title>SupplySync â€” Supply Inventory Tracking System</title> 
 <style> 
 :root{--green:#00ff66;--dark:#020d08;--red:#c62828;--shadow:0 6px 18px rgba(0,0,0,.08);font-family:Arial,Helvetica,sans-serif} 
 body{margin:0;background:linear-gradient(180deg,#e8f5ee,#fff)} 
 .login{max-width:300px;margin:80px auto;background:#fff;padding:20px;border-radius:14px;box-shadow:var(--shadow);text-align:center} 
 .wrap{display:none;max-width:1100px;margin:20px auto;padding:20px} 
 header{display:flex;gap:20px;align-items:center} 
 .logo{width:120px;height:120px;background:#0f7a3d;color:#fff;display:flex;justify-content:center;align-items:center;border-radius:50%;font-weight:bold;text-align:center} 
 .blink{font-size:26px;font-weight:800;animation:blink 1.5s infinite} 
 @keyframes blink{50%{color:#c62828}} 
 .main{display:grid;grid-template-columns:260px 1fr;gap:20px;margin-top:20px} 
 .sidebar,.card{background:#fff;padding:20px;border-radius:14px;box-shadow:var(--shadow);border-top:6px solid #0f7a3d} 
 input, select{width:100%;padding:10px;margin-bottom:10px;border-radius:8px;border:1px solid #ccc} 
 button{padding:10px 14px;border:none;border-radius:8px;background:#0f7a3d;color:#fff;cursor:pointer;margin-right:5px} 
 button.delete{background:#c62828} 
 button.retrieve{background:#0f7a3d} 
 table{width:100%;border-collapse:collapse;margin-top:14px} 
 th,td{padding:10px;border-bottom:1px solid #ddd;text-align:center} 
 th{background:#0f7a3d;color:#fff} 
 .stock-low{color:#c62828;font-weight:bold} 
 .stock-ok{color:#0f7a3d;font-weight:bold} 
 .deleted-item{color:#555;font-style:italic} 
 footer{text-align:center;font-size:13px;color:#555} 
 .toast{position:fixed;top:20px;right:20px;background:#0f7a3d;color:#fff;padding:14px 20px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,.2);opacity:0;transform:translateY(-20px);transition:.4s;z-index:2000;font-size:14px} 
 .toast.show{opacity:1;transform:translateY(0)} 
 .toast.error{background:#c62828} 
 </style> 
 </head> 
 <body> 
  
 <!-- Login --> 
 <div class="login" id="loginBox"> 
   <h3>Admin Login</h3> 
   <input id="username" placeholder="Username"> 
   <input id="password" type="password" placeholder="Password"> 
   <button onclick="login()">Login</button> 
 </div> 
  
 <!-- App --> 
 <div class="wrap" id="app"> 
 <header> 
   <div class="logo">SUPPLY<br>SYNC</div> 
   <div> 
     <div class="blink">SUPPLYSYNC</div> 
     <div class="subtitle">Supply Inventory Tracking System</div> 
   </div> 
 </header> 
 <div class="main"> 
 <aside class="sidebar"> 
   <strong>Inventory Links</strong><br><br> 
   <a href="https://docs.google.com/spreadsheets" target="_blank">ðŸ“„ Google Sheet Records</a><br><br> 
 </aside> 
 <main> 
 <div class="card"> 
   <input id="searchInput" placeholder="Search active inventory..." onkeyup="searchInventory()"> 
 </div> 
 <div class="card"> 
   <input id="deletedSearchInput" placeholder="Search deleted items..." onkeyup="searchDeletedInventory()"> 
 </div> 
  
 <div class="card"> 
 <h3>Add Inventory Item</h3> 
 <input id="itemName" placeholder="Item Name"> 
 <input id="itemQty" type="number" min="1" placeholder="Quantity"> 
 <input id="itemPrice" type="number" min="1" placeholder="Price"> 
 <button onclick="addItem()">Add Item</button> 
  
 <hr> 
 <h4>Delete Active Item</h4> 
 <select id="selectActive"></select> 
 <button class="delete" onclick="deleteSelected()">Delete Selected</button> 
  
 <table> 
 <thead> 
 <tr> 
 <th>Item</th> 
 <th>Qty</th> 
 <th>Price</th> 
 <th>Status</th> 
 </tr> 
 </thead> 
 <tbody id="inventoryList"></tbody> 
 </table> 
 </div> 
  
 <div class="card"> 
 <h3>Deleted Items</h3> 
 <h4>Retrieve Deleted Item</h4> 
 <select id="selectDeleted"></select> 
 <button class="retrieve" onclick="retrieveSelected()">Retrieve Selected</button> 
  
 <table> 
 <thead> 
 <tr> 
 <th>Item</th> 
 <th>Qty</th> 
 <th>Price</th> 
 <th>Status</th> 
 </tr> 
 </thead> 
 <tbody id="deletedList"></tbody> 
 </table> 
 </div> 
  
 <footer> 
 THANK YOU! <br> 
 Last Updated: <span id="date"></span> 
 </footer> 
 </main> 
 </div> 
 </div> 
  
 <div id="toast" class="toast"></div> 
  
 <script> 
 document.getElementById("date").textContent=new Date().toLocaleString(); 
  
 const SHEET_URL = ""; // Optional: Paste Google Web App URL here for cloud sync
 let inventory = []; 
  
 /* Notification */ 
 function showToast(msg,type="success"){ 
   const t=document.getElementById("toast"); 
   t.textContent=msg; 
   t.className="toast show"; 
   if(type==="error") t.classList.add("error"); 
   setTimeout(()=>{t.className="toast"},3000); 
 } 
  
 /* Login */ 
 function login(){ 
   const u = document.getElementById("username");
   const p = document.getElementById("password");
   const l = document.getElementById("loginBox");
   const a = document.getElementById("app");

   if(u.value==="admin" && p.value==="1234"){ 
     l.style.display="none"; 
     a.style.display="block"; 
     showToast("Login successful!"); 
     loadInventory(); 
   } else showToast("Invalid admin account","error"); 
 } 
  
 /* Load inventory */ 
 async function loadInventory(){ 
   // 1. Try LocalStorage first
   const localData = localStorage.getItem("supplySyncData");
   if(localData){
     inventory = JSON.parse(localData);
     displayItems();
   }

   // 2. If Cloud URL is provided, try to sync/fetch
   if(SHEET_URL && SHEET_URL !== "") {
     try{ 
       const res = await fetch(SHEET_URL); 
       const data = await res.json(); 
       // Merge or overwrite strategy could go here. For now, let's assume Cloud is truth if available.
       inventory = data.map(d=>({ 
         name:d.name, 
         qty:+d.qty, 
         price:+d.price, 
         deleted:d.action==="DELETE" && d.status==="DELETED" 
       })); 
       saveLocal(); // Update local cache
       displayItems(); 
     }catch(e){ 
       console.error(e);
       if(!localData) showToast("Failed to load inventory from cloud","error"); 
     } 
   } else if (!localData) {
      // Initialize with sample data if empty
      inventory = [
        { name: "Laptop Dell XPS", qty: 5, price: 1200, deleted: false },
        { name: "Wireless Mouse", qty: 25, price: 20, deleted: false },
        { name: "HDMI Cable", qty: 0, price: 15, deleted: false },
        { name: "Old Monitor", qty: 2, price: 50, deleted: true }
      ];
      saveLocal();
      displayItems();
   }
 } 
  
 /* Save Data (Local + Cloud) */ 
 function saveData(item, action){
    // Update LocalStorage
    saveLocal();

    // Update Cloud if configured
    if(SHEET_URL && SHEET_URL !== "") {
       fetch(SHEET_URL,{ 
         method:"POST", 
         body:JSON.stringify({ ...item, action: action }) 
       }).catch(err=>console.log(err)); 
    }
 }

 function saveLocal(){
    localStorage.setItem("supplySyncData", JSON.stringify(inventory));
 }
  
 /* Display Items and populate selects */ 
 function displayItems(){ 
   const inventoryList=document.getElementById("inventoryList"); 
   const deletedList=document.getElementById("deletedList"); 
   const selectActive=document.getElementById("selectActive"); 
   const selectDeleted=document.getElementById("selectDeleted"); 
  
   inventoryList.innerHTML=""; 
   deletedList.innerHTML=""; 
   selectActive.innerHTML=""; 
   selectDeleted.innerHTML=""; 
  
   inventory.forEach((item,i)=>{ 
     if(!item.deleted){ 
       inventoryList.innerHTML+=`<tr>
         <td>${item.name}</td>
         <td>${item.qty}</td>
         <td>${item.price}</td>
         <td class="stock-${item.qty<10?'low':'ok'}">${item.qty<10?'Low Stock':'In Stock'}</td>
       </tr>`;
       
       const opt = document.createElement("option");
       opt.value = item.name;
       opt.textContent = item.name;
       selectActive.appendChild(opt);
     } else {
       deletedList.innerHTML+=`<tr>
         <td class="deleted-item">${item.name}</td>
         <td>${item.qty}</td>
         <td>${item.price}</td>
         <td>Deleted</td>
       </tr>`;
       
       const opt = document.createElement("option");
       opt.value = item.name;
       opt.textContent = item.name;
       selectDeleted.appendChild(opt);
     }
   });
 }

 /* Add Item */
 function addItem(){
    const nameInput = document.getElementById("itemName");
    const qtyInput = document.getElementById("itemQty");
    const priceInput = document.getElementById("itemPrice");
    
    const name = nameInput.value.trim();
    const qty = +qtyInput.value;
    const price = +priceInput.value;

    if(!name || qty <= 0 || price <= 0){
        showToast("Please enter valid item details", "error");
        return;
    }

    const newItem = { name, qty, price, deleted: false };
    inventory.push(newItem);
    
    saveData(newItem, "ADD");
    displayItems();
    showToast("Item added successfully");

    nameInput.value = "";
    qtyInput.value = "";
    priceInput.value = "";
 }

 /* Delete Selected Item */
 function deleteSelected(){
    const select = document.getElementById("selectActive");
    const name = select.value;
    
    if(!name) {
        showToast("No item selected", "error");
        return;
    }

    const item = inventory.find(i => i.name === name);
    if(item){
        item.deleted = true;
        saveData(item, "DELETE");
        displayItems();
        showToast("Item deleted");
    }
 }

 /* Retrieve Deleted Item */
 function retrieveSelected(){
    const select = document.getElementById("selectDeleted");
    const name = select.value;

    if(!name) {
        showToast("No item selected", "error");
        return;
    }

    const item = inventory.find(i => i.name === name);
    if(item){
        item.deleted = false;
        saveData(item, "RETRIEVE");
        displayItems();
        showToast("Item retrieved");
    }
 }

 /* Search Active Inventory */
 function searchInventory(){
    const input = document.getElementById("searchInput");
    const filter = input.value.toUpperCase();
    const table = document.getElementById("inventoryList");
    const tr = table.getElementsByTagName("tr");

    for (let i = 0; i < tr.length; i++) {
        const td = tr[i].getElementsByTagName("td")[0];
        if (td) {
            const txtValue = td.textContent || td.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                tr[i].style.display = "";
            } else {
                tr[i].style.display = "none";
            }
        }
    }
 }

 /* Search Deleted Inventory */
 function searchDeletedInventory(){
    const input = document.getElementById("deletedSearchInput");
    const filter = input.value.toUpperCase();
    const table = document.getElementById("deletedList");
    const tr = table.getElementsByTagName("tr");

    for (let i = 0; i < tr.length; i++) {
        const td = tr[i].getElementsByTagName("td")[0];
        if (td) {
            const txtValue = td.textContent || td.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                tr[i].style.display = "";
            } else {
                tr[i].style.display = "none";
            }
        }
    }
 }
 </script> 
 </body> 
 </html>