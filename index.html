<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SupplySync â€” Supply Inventory Tracking System</title>
<style>
:root{--green:#00ff66;--dark:#020d08;--red:#c62828;--shadow:0 6px 18px rgba(0,0,0,.08);font-family:Arial,Helvetica,sans-serif}
body{margin:0;background:linear-gradient(180deg,#e8f5ee,#fff)}
.login{max-width:300px;margin:80px auto;background:#fff;padding:20px;border-radius:14px;box-shadow:var(--shadow);text-align:center}
.wrap{display:none;max-width:1100px;margin:20px auto;padding:20px}
header{display:flex;gap:20px;align-items:center}
.logo{width:120px;height:120px;background:#0f7a3d;color:#fff;display:flex;justify-content:center;align-items:center;border-radius:50%;font-weight:bold;text-align:center}
.blink{font-size:26px;font-weight:800;animation:blink 1.5s infinite}
@keyframes blink{50%{color:#c62828}}
.main{display:grid;grid-template-columns:260px 1fr;gap:20px;margin-top:20px}
.sidebar,.card{background:#fff;padding:20px;border-radius:14px;box-shadow:var(--shadow);border-top:6px solid #0f7a3d}
input, select{width:100%;padding:10px;margin-bottom:10px;border-radius:8px;border:1px solid #ccc}
button{padding:10px 14px;border:none;border-radius:8px;background:#0f7a3d;color:#fff;cursor:pointer;margin-right:5px}
button.delete{background:#c62828}
button.retrieve{background:#0f7a3d}
table{width:100%;border-collapse:collapse;margin-top:14px}
th,td{padding:10px;border-bottom:1px solid #ddd;text-align:center}
th{background:#0f7a3d;color:#fff}
.stock-low{color:#c62828;font-weight:bold}
.stock-ok{color:#0f7a3d;font-weight:bold}
.deleted-item{color:#555;font-style:italic}
footer{text-align:center;font-size:13px;color:#555}
.toast{position:fixed;top:20px;right:20px;background:#0f7a3d;color:#fff;padding:14px 20px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,.2);opacity:0;transform:translateY(-20px);transition:.4s;z-index:2000;font-size:14px}
.toast.show{opacity:1;transform:translateY(0)}
.toast.error{background:#c62828}
</style>
</head>
<body>

<!-- Login -->
<div class="login" id="loginBox">
  <h3>Admin Login</h3>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<!-- App -->
<div class="wrap" id="app">
<header>
  <div class="logo">SUPPLY<br>SYNC</div>
  <div>
    <div class="blink">SUPPLYSYNC</div>
    <div class="subtitle">Supply Inventory Tracking System</div>
  </div>
</header>
<div class="main">
<aside class="sidebar">
  <strong>Inventory Links</strong><br><br>
  <a href="https://docs.google.com/spreadsheets" target="_blank">ðŸ“„ Google Sheet Records</a><br><br>
</aside>
<main>
<div class="card">
  <input id="searchInput" placeholder="Search active inventory..." onkeyup="searchInventory()">
</div>
<div class="card">
  <input id="deletedSearchInput" placeholder="Search deleted items..." onkeyup="searchDeletedInventory()">
</div>

<div class="card">
<h3>Add Inventory Item</h3>
<input id="itemName" placeholder="Item Name">
<input id="itemQty" type="number" min="1" placeholder="Quantity">
<input id="itemPrice" type="number" min="1" placeholder="Price">
<button onclick="addItem()">Add Item</button>

<hr>
<h4>Delete Active Item</h4>
<select id="selectActive"></select>
<button class="delete" onclick="deleteSelected()">Delete Selected</button>

<table>
<thead>
<tr>
<th>Item</th>
<th>Qty</th>
<th>Price</th>
<th>Status</th>
</tr>
</thead>
<tbody id="inventoryList"></tbody>
</table>
</div>

<div class="card">
<h3>Deleted Items</h3>
<h4>Retrieve Deleted Item</h4>
<select id="selectDeleted"></select>
<button class="retrieve" onclick="retrieveSelected()">Retrieve Selected</button>

<table>
<thead>
<tr>
<th>Item</th>
<th>Qty</th>
<th>Price</th>
<th>Status</th>
</tr>
</thead>
<tbody id="deletedList"></tbody>
</table>
</div>

<footer>
THANK YOU! <br>
Last Updated: <span id="date"></span>
</footer>
</main>
</div>
</div>

<div id="toast" class="toast"></div>

<script>
document.getElementById("date").textContent=new Date().toLocaleString();

const SHEET_URL = "PASTE_YOUR_WEB_APP_URL_HERE"; // replace with your Google Web App URL
let inventory = [];

/* Notification */
function showToast(msg,type="success"){
  const t=document.getElementById("toast");
  t.textContent=msg;
  t.className="toast show";
  if(type==="error") t.classList.add("error");
  setTimeout(()=>{t.className="toast"},3000);
}

/* Login */
function login(){
  if(username.value==="admin" && password.value==="1234"){
    loginBox.style.display="none";
    app.style.display="block";
    showToast("Login successful!");
    loadInventory();
  } else showToast("Invalid admin account","error");
}

/* Load inventory from Google Sheets */
async function loadInventory(){
  try{
    const res = await fetch(SHEET_URL);
    const data = await res.json();
    inventory = data.map(d=>({
      name:d.name,
      qty:+d.qty,
      price:+d.price,
      deleted:d.action==="DELETE" && d.status==="DELETED"
    }));
    displayItems();
  }catch(e){
    showToast("Failed to load inventory","error");
  }
}

/* Send to Google Sheets */
function sendToSheet(data){
  fetch(SHEET_URL,{
    method:"POST",
    body:JSON.stringify(data)
  }).catch(err=>console.log(err));
}

/* Display Items and populate selects */
function displayItems(){
  const inventoryList=document.getElementById("inventoryList");
  const deletedList=document.getElementById("deletedList");
  const selectActive=document.getElementById("selectActive");
  const selectDeleted=document.getElementById("selectDeleted");

  inventoryList.innerHTML="";
  deletedList.innerHTML="";
  selectActive.innerHTML="";
  selectDeleted.innerHTML="";

  inventory.forEach((item,i)=>{
    if(!item.deleted){
      inventoryList.innerHTML+=`<tr><td>${item.name}</td><td>${item.qty}</td><td>â‚±${item.price}</td><td class="${item.qty<50?'stock-low':'stock-ok'}">${item.qty<50?'Low':'OK'}</td></tr>`;
      let opt=document.createElement("option"); opt.value=i; opt.text=item.name; selectActive.add(opt);
    } else {
      deletedList.innerHTML+=`<tr class="deleted-item"><td>${item.name}</td><td>${item.qty}</td><td>â‚±${item.price}</td><td>DELETED</td></tr>`;
      let opt=document.createElement("option"); opt.value=i; opt.text=item.name; selectDeleted.add(opt);
    }
  });
}

/* Add Item */
function addItem(){
  if(!itemName.value||!itemQty.value||!itemPrice.value){
    showToast("Please complete all fields","error"); return;
  }
  const newItem={name:itemName.value,qty:+itemQty.value,price:+itemPrice.value,deleted:false};
  inventory.push(newItem);
  displayItems();
  sendToSheet({...newItem,status:newItem.qty<50?"Low":"OK",action:"ADD"});
  showToast("Item added successfully");
  itemName.value=itemQty.value=itemPrice.value="";
}

/* Delete Selected */
function deleteSelected(){
  const idx=document.getElementById("selectActive").value;
  if(idx!=="" && confirm(`Delete ${inventory[idx].name}?`)){
    inventory[idx].deleted=true;
    displayItems();
    sendToSheet({name:inventory[idx].name,qty:inventory[idx].qty,price:inventory[idx].price,status:"DELETED",action:"DELETE"});
    showToast(`${inventory[idx].name} deleted`);
  }
}

/* Retrieve Selected */
function retrieveSelected(){
  const idx=document.getElementById("selectDeleted").value;
  if(idx!=="" && confirm(`Retrieve ${inventory[idx].name}?`)){
    inventory[idx].deleted=false;
    displayItems();
    sendToSheet({name:inventory[idx].name,qty:inventory[idx].qty,price:inventory[idx].price,status:inventory[idx].qty<50?"Low":"OK",action:"RETRIEVE"});
    showToast(`${inventory[idx].name} retrieved`);
  }
}

/* Search Active */
function searchInventory(){
  const v=searchInput.value.toLowerCase();
  document.querySelectorAll("#inventoryList tr").forEach(r=>r.style.display=r.children[0].textContent.toLowerCase().includes(v)?"":"none");
}

/* Search Deleted */
function searchDeletedInventory(){
  const v=deletedSearchInput.value.toLowerCase();
  document.querySelectorAll("#deletedList tr").forEach(r=>r.style.display=r.children[0].textContent.toLowerCase().includes(v)?"":"none");
}
</script>

</body>
</html>

