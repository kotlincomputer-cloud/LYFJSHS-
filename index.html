<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>SupplySync â€” Supply Inventory Tracking System</title>


<link rel="icon" type="image/png" href="1768986500105.jpg">

<style>
:root{
  --green:#0f7a3d;
  --red:#c62828;
  --shadow:0 6px 18px rgba(0,0,0,.08);
  font-family:Arial,Helvetica,sans-serif;
}
body{
  margin:0;
  background:linear-gradient(180deg,#e8f5ee,#fff);
}


.login{
  max-width:300px;
  margin:80px auto;
  background:#fff;
  padding:20px;
  border-radius:14px;
  box-shadow:var(--shadow);
  text-align:center;
}
.login-logo{
  width:100px;
  height:100px;
  object-fit:contain;
  margin-bottom:10px;
}
  
.wrap{display:none;max-width:1100px;margin:20px auto;padding:20px}
header{display:flex;gap:20px;align-items:center}
.logo{
  width:120px;
  height:120px;
  border-radius:50%;
  overflow:hidden;
}
.logo img{
  width:100%;
  height:100%;
  object-fit:cover;
}
.blink{
  font-size:26px;
  font-weight:800;
  animation:blink 1.5s infinite;
}
@keyframes blink{50%{color:var(--red)}}

.main{
  display:grid;
  grid-template-columns:260px 1fr;
  gap:20px;
  margin-top:20px;
}
.sidebar,.card{
  background:#fff;
  padding:20px;
  border-radius:14px;
  box-shadow:var(--shadow);
  border-top:6px solid var(--green);
}

input,select{
  width:100%;
  padding:10px;
  margin-bottom:10px;
  border-radius:8px;
  border:1px solid #ccc;
}
button{
  padding:10px 14px;
  border:none;
  border-radius:8px;
  background:var(--green);
  color:#fff;
  cursor:pointer;
}
button.delete{background:var(--red)}
button.retrieve{background:var(--green)}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:14px;
}
th,td{
  padding:10px;
  border-bottom:1px solid #ddd;
  text-align:center;
}
th{background:var(--green);color:#fff}
.stock-low{color:var(--red);font-weight:bold}
.stock-ok{color:var(--green);font-weight:bold}
.deleted-item{color:#555;font-style:italic}

footer{
  text-align:center;
  font-size:13px;
  color:#555;
}

.toast{
  position:fixed;
  top:20px;
  right:20px;
  background:var(--green);
  color:#fff;
  padding:14px 20px;
  border-radius:10px;
  opacity:0;
  transform:translateY(-20px);
  transition:.4s;
}
.toast.show{opacity:1;transform:translateY(0)}
.toast.error{background:var(--red)}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="login" id="loginBox">
  <img class="login-logo" src="1768986500105.jpg">
  <h3>Admin Login</h3>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>


<div class="wrap" id="app">
<header>
  <div class="logo">
    <img src="1768986500105.jpg">
  </div>
  <div>
    <div class="blink">SUPPLYSYNC</div>
    <div>Supply Inventory Tracking System</div>
  </div>
</header>

<div class="main">
<aside class="sidebar">
<strong>Inventory Links</strong><br><br>
<a href="https://docs.google.com/spreadsheets" target="_blank">ðŸ“„ Google Sheets</a>
</aside>

<main>
<div class="card">
<h3>Add Item</h3>
<input id="itemName" placeholder="Item Name">
<input id="itemQty" type="number" placeholder="Quantity">
<input id="itemPrice" type="number" placeholder="Price">
<button onclick="addItem()">Add</button>

<hr>
<select id="selectActive"></select>
<button class="delete" onclick="deleteSelected()">Delete</button>

<table>
<thead>
<tr><th>Item</th><th>Qty</th><th>Price</th><th>Status</th></tr>
</thead>
<tbody id="inventoryList"></tbody>
</table>
</div>

<div class="card">
<h3>Deleted Items</h3>
<select id="selectDeleted"></select>
<button class="retrieve" onclick="retrieveSelected()">Retrieve</button>

<table>
<thead>
<tr><th>Item</th><th>Qty</th><th>Price</th><th>Status</th></tr>
</thead>
<tbody id="deletedList"></tbody>
</table>
</div>

<footer>
Last Updated: <span id="date"></span>
</footer>

</main>
</div>
</div>

<div id="toast" class="toast"></div>

<script>
document.getElementById("date").textContent = new Date().toLocaleString();
let inventory = [];

const SHEET_URL = "https://script.google.com/macros/s/AKfycbxMZydaSl4J54_ftUokSo1tpdsz1IaUKdk7trTRrnT6729RTQo9QFbPiEGnp7i1mbjb/exec"; 

function showToast(msg,type="success"){
  const t=document.getElementById("toast");
  t.textContent=msg;
  t.className="toast show";
  if(type==="error") t.classList.add("error");
  setTimeout(()=>t.className="toast",3000);
}

function login(){
  if(username.value==="admin" && password.value==="1234"){
    loginBox.style.display="none";
    app.style.display="block";
    showToast("Login successful");
  }else showToast("Invalid login","error");
}

function display(){
  inventoryList.innerHTML="";
  deletedList.innerHTML="";
  selectActive.innerHTML="";
  selectDeleted.innerHTML="";

  inventory.forEach((i,x)=>{
    if(!i.deleted){
      inventoryList.innerHTML+=`
      <tr>
        <td>${i.name}</td>
        <td>${i.qty}</td>
        <td>â‚±${i.price}</td>
        <td class="${i.qty<50?'stock-low':'stock-ok'}">
        ${i.qty<50?'Low':'OK'}
        </td>
      </tr>`;
      selectActive.innerHTML+=`<option value="${x}">${i.name}</option>`;
    }else{
      deletedList.innerHTML+=`
      <tr class="deleted-item">
        <td>${i.name}</td>
        <td>${i.qty}</td>
        <td>â‚±${i.price}</td>
        <td>DELETED</td>
      </tr>`;
      selectDeleted.innerHTML+=`<option value="${x}">${i.name}</option>`;
    }
  });
}


function sendToSheet(item, action){
  const data = {
    timestamp: new Date().toLocaleString(),
    name: item.name,
    qty: item.qty,
    price: item.price,
    status: item.deleted ? "DELETED" : (item.qty<50 ? "Low" : "OK"),
    action: action
  };
  
  fetch(SHEET_URL,{
    method:"POST",
    body:JSON.stringify(data)
  }).catch(err => console.error("Error sending to sheet:", err));
}

function addItem(){
  if(!itemName.value || !itemQty.value || !itemPrice.value){
    showToast("Complete all fields","error"); 
    return;
  }

  const item = {
    name: itemName.value,
    qty: +itemQty.value,
    price: +itemPrice.value,
    deleted: false
  };

  inventory.push(item);
  display();
  sendToSheet(item, "ADD");

  itemName.value = itemQty.value = itemPrice.value = "";
  showToast("Item added and saved to sheet");
}

function deleteSelected(){
  const idx = selectActive.value;
  if(idx==="") return;
  inventory[idx].deleted = true;
  display();
  sendToSheet(inventory[idx], "DELETE");
  showToast("Item deleted and saved to sheet");
}

function retrieveSelected(){
  const idx = selectDeleted.value;
  if(idx==="") return;
  inventory[idx].deleted = false;
  display();
  sendToSheet(inventory[idx], "RETRIEVE");
  showToast("Item retrieved and saved to sheet");
}
</script>

</body>
</html>

