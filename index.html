<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SupplySync — Supply Inventory Tracking System</title>

<link rel="icon" type="image/png" href="1768986500105.jpg">

<style>
:root{
  --green:#0f7a3d;
  --red:#c62828;
  --shadow:0 6px 18px rgba(0,0,0,.08);
  font-family:Arial,Helvetica,sans-serif;
}
body{
  margin:0;
  background:linear-gradient(180deg,#e8f5ee,#fff);
}


.login{
  width:90%;
  max-width:400px;
  margin:10vh auto;
  background:#fff;
  padding:20px;
  border-radius:14px;
  box-shadow:var(--shadow);
  text-align:center;
}
.login-logo{
  width:100px;
  margin-bottom:10px;
}


.wrap{display:none;max-width:1100px;margin:20px auto;padding:20px}

header{
  display:flex;
  align-items:center;
  gap:20px;
}
.logo{
  width:120px;
  height:120px;
  border-radius:50%;
  overflow:hidden;
}
.logo img{
  width:100%;
  height:100%;
  object-fit:cover;
}
.blink{
  font-size:26px;
  font-weight:800;
  animation:blink 1.5s infinite;
}
@keyframes blink{50%{color:var(--red)}}

.main{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
  margin-top:20px;
}

.card{
  background:#fff;
  padding:20px;
  border-radius:14px;
  box-shadow:var(--shadow);
  border-top:6px solid var(--green);
}

input,select,button{
  width:100%;
  padding:10px;
  margin-bottom:10px;
  border-radius:8px;
  border:1px solid #ccc;
}
button{
  background:var(--green);
  color:#fff;
  border:none;
  cursor:pointer;
}
button.delete{background:var(--red)}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}
th,td{
  padding:8px;
  border-bottom:1px solid #ddd;
  text-align:center;
}
th{background:var(--green);color:#fff}
.stock-low{color:#c62828;font-weight:bold}
.stock-ok{color:#0f7a3d;font-weight:bold}
</style>
</head>

<body>


<div class="login" id="loginBox">
  <img src="1768986500105.jpg" class="login-logo">
  <h3>Admin Login</h3>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>


<div class="wrap" id="app">

<header>
  <div class="logo">
    <img src="1768986500105.jpg">
  </div>
  <div>
    <div class="blink">SUPPLYSYNC</div>
    <div>Supply Inventory Tracking System</div>
  </div>
</header>

<div class="main">


<div class="card">
<h3>Add Item</h3>
<input id="itemName" placeholder="Item Name">
<input id="itemQty" type="number" placeholder="Quantity">
<input id="itemPrice" type="number" placeholder="Price">
<button onclick="addItem()">Add</button>

<hr>

<select id="selectActive"></select>
<button class="delete" onclick="deleteItem()">Delete</button>

<table>
<thead>
<tr><th>Item</th><th>Qty</th><th>Price</th><th>Status</th></tr>
</thead>
<tbody id="inventoryList"></tbody>
</table>
</div>


<div class="card">
<h3>Deleted Items</h3>
<select id="selectDeleted"></select>
<button onclick="retrieveItem()">Retrieve</button>

<table>
<thead>
<tr><th>Item</th><th>Qty</th><th>Price</th><th>Status</th></tr>
</thead>
<tbody id="deletedList"></tbody>
</table>
</div>

</div>
</div>

<script>

const SHEET_URL = "https://script.google.com/macros/s/AKfycbwQc9NMZoWN4AJ3-3W_E-tXr4o_hz4d2u1kNdw8uNNk_OdhN_u_GGkUdL3g-wB_FOof/exec";


let inventory = [];


function uid(){
  return "ID-"+Date.now()+"-"+Math.floor(Math.random()*1000);
}

function send(item){
  fetch(SHEET_URL,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify(item)
  });
}


function login(){
  if(username.value==="admin" && password.value==="1234"){
    loginBox.style.display="none";
    app.style.display="block";
  }else alert("Invalid login");
}


function render(){
  inventoryList.innerHTML="";
  deletedList.innerHTML="";
  selectActive.innerHTML="";
  selectDeleted.innerHTML="";

  inventory.forEach((i,x)=>{
    if(!i.deleted){
      inventoryList.innerHTML+=`
      <tr>
        <td>${i.name}</td>
        <td>${i.qty}</td>
        <td>₱${i.price}</td>
        <td class="${i.qty<50?'stock-low':'stock-ok'}">
          ${i.qty<50?'LOW':'OK'}
        </td>
      </tr>`;
      selectActive.innerHTML+=`<option value="${x}">${i.name}</option>`;
    }else{
      deletedList.innerHTML+=`
      <tr>
        <td>${i.name}</td>
        <td>${i.qty}</td>
        <td>₱${i.price}</td>
        <td>DELETED</td>
      </tr>`;
      selectDeleted.innerHTML+=`<option value="${x}">${i.name}</option>`;
    }
  });
}


function addItem(){
  if(!itemName.value||!itemQty.value||!itemPrice.value)return;

  const item={
    id:uid(),
    name:itemName.value,
    qty:+itemQty.value,
    price:+itemPrice.value,
    status:itemQty.value<50?"LOW":"OK",
    action:"ADD",
    deleted:false
  };

  inventory.push(item);
  send(item);
  render();

  itemName.value=itemQty.value=itemPrice.value="";
}

function deleteItem(){
  if(selectActive.value==="")return;
  let i=inventory[selectActive.value];
  i.deleted=true;
  i.status="DELETED";
  i.action="UPDATE";
  send(i);
  render();
}

function retrieveItem(){
  if(selectDeleted.value==="")return;
  let i=inventory[selectDeleted.value];
  i.deleted=false;
  i.status=i.qty<50?"LOW":"OK";
  i.action="UPDATE";
  send(i);
  render();
}
</script>

</body>
</html>
